<!-- Spinner -->
<div *ngIf="loading" class="d-flex justify-content-center">
  <div class="spinner-border" role="status">
  </div>
</div>
<!-- Post -->
<div>
    <div><h1>{{post.title}}</h1><small><h5>Made by {{post.owner.name}}</h5></small></div>
    
    <div>{{post.body}}</div>
    <span class="badge rounded-pill bg-success"style="cursor: pointer;" (click)="vote('up')">Upvote</span>
    {{post.vote_ratio}}%
    <span class="badge rounded-pill bg-danger"style="cursor: pointer;" (click)="vote('down')">Downvote</span>

    <form (ngSubmit)="onSubmit(f)" #f="ngForm">
      <div class="form-group">
        <input type="text" class="form-control" 
        id="comment" placeholder="Comment on this post"
        ngModel name="comment">
      </div>
      <button type="submit" class="btn btn-primary">Comment</button>

    </form>
    <hr />

<!-- Comments -->
<div *ngIf="comments.length>0; else infoText">
<!-- Spinner -->
<div *ngIf="loadingComments" class="d-flex justify-content-center">
  <div class="spinner-border" role="status">
  </div>
</div>
<!-- Comment List -->
  <div *ngFor="let comment of comments" >
    <div *ngIf="!comment.editCommentMode">

    <p><b>{{comment.body}}</b></p>
    <small> Made by {{ comment.owner.name }}</small>
    <div *ngIf="comment.owner==profile">
    <button type="button" class="btn btn-warning btn-sm" (click)="onEditComment(comment.id)" >Edit</button>
    <button type="button" class="btn btn-danger btn-sm" (click)="onDeleteComment(comment.id)">Delete</button>
  </div>
  </div>
  <div *ngIf="comment.editCommentMode">
    <form (ngSubmit)="onSubmitComment(f, comment.id)" #f="ngForm" >
      <div class="form-group">
        <input type="text" class="form-control" 
        id="comment" 
        [(ngModel)]="comment.body" name="comment">
      </div>
      <button type="submit" class="btn btn-success">Submit</button>
    </form>
</div>
</div>

</div>
<ng-template #infoText>
  <p>No comments Yet! Be the first to comment.</p>
</ng-template>
<hr />

<div *ngIf="post.owner==profile">
  <a routerLink="edit"><button class="btn btn-secondary">Edit Post</button></a>
  <button class="btn btn-danger" (click)="onDelete()">Delete Post</button>
</div>

</div>